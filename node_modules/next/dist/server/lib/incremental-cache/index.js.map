{"version":3,"sources":["../../../../src/server/lib/incremental-cache/index.ts"],"names":["toRoute","pathname","replace","CacheHandler","constructor","_ctx","get","_key","_fetchCache","set","_data","IncrementalCache","fs","dev","appDir","flushToDisk","fetchCache","minimalMode","serverDistDir","requestHeaders","maxMemoryCacheSize","getPrerenderManifest","fetchCacheKeyPrefix","CurCacheHandler","FileSystemCache","FetchCache","process","env","__NEXT_TEST_MAX_ISR_CACHE","parseInt","prerenderManifest","cacheHandler","_appDir","_requestHeaders","calculateRevalidate","fromTime","Date","getTime","initialRevalidateSeconds","routes","revalidateAfter","_getPathname","normalizePagePath","fetchCacheKey","url","init","cacheString","JSON","stringify","method","headers","mode","redirect","credentials","referrer","referrerPolicy","integrity","next","cache","cacheKey","NEXT_RUNTIME","bufferToHex","buffer","Array","prototype","map","call","Uint8Array","b","toString","padStart","join","TextEncoder","encode","crypto","subtle","digest","require","createHash","update","cacheData","entry","value","kind","revalidate","age","Math","round","now","lastModified","isStale","cacheState","data","curRevalidate","undefined","notFoundRoutes","includes","revalidateSeconds","length","Error","dataRoute","path","posix","srcRoute","error","console","warn"],"mappings":"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"}